<!DOCTYPE html>

<html lang="ru-RU" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>macro &mdash; CMake 3.0.2 Documentation</title>

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/cmake.css?v=d0fed63b" />
    
    <script src="../_static/documentation_options.js?v=c3686c44"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="canonical" href="https://ltdorgtest.github.io/cmake-docs-l10n/command/macro.html" />
    <link rel="icon" href="../_static/cmake-favicon.ico"/>
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="mark_as_advanced" href="mark_as_advanced.html" />
    <link rel="prev" title="load_command" href="load_command.html" />
    <script type="text/javascript" src="../ltd-current.js"></script>
    <script type="text/javascript" src="../../../ltd-config.js"></script>
    <script type="text/javascript" src="../../../ltd-flyout.js"></script>
 

  </head><body>

    <div class="related" role="navigation" aria-label="Related">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Алфавитный указатель"
             accesskey="I">указатель</a></li>
        <li class="right" >
          <a href="mark_as_advanced.html" title="mark_as_advanced"
             accesskey="N">вперёд</a> |</li>
        <li class="right" >
          <a href="load_command.html" title="load_command"
             accesskey="P">назад</a> |</li>
        <li>
          <img src="../_static/cmake-logo-16.png" alt=""
              style="vertical-align: middle; margin-top: -2px" />
        </li>
        <li>
          <a href="https://cmake.org/">CMake</a> &#187;
        </li>
        <li>
          <a href="../index.html">Documentation</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="../manual/cmake-commands.7.html" accesskey="U">cmake-commands(7)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">macro</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="macro">
<span id="command:macro"></span><h1>macro<a class="headerlink" href="#macro" title="Ссылка на этот заголовок">¶</a></h1>
<p>Start recording a macro for later invocation as a command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">macro</span><span class="p">(</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">arg1</span> <span class="p">[</span><span class="n">arg2</span> <span class="p">[</span><span class="n">arg3</span> <span class="o">...</span><span class="p">]]])</span>
  <span class="n">COMMAND1</span><span class="p">(</span><span class="n">ARGS</span> <span class="o">...</span><span class="p">)</span>
  <span class="n">COMMAND2</span><span class="p">(</span><span class="n">ARGS</span> <span class="o">...</span><span class="p">)</span>
  <span class="o">...</span>
<span class="n">endmacro</span><span class="p">(</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Define a macro named &lt;name&gt; that takes arguments named arg1 arg2 arg3
(…).  Commands listed after macro, but before the matching endmacro,
are not invoked until the macro is invoked.  When it is invoked, the
commands recorded in the macro are first modified by replacing formal
parameters (<code class="docutils literal notranslate"><span class="pre">${arg1}</span></code>) with the arguments passed, and then invoked as
normal commands.  In addition to referencing the formal parameters you
can reference the values <code class="docutils literal notranslate"><span class="pre">${ARGC}</span></code> which will be set to the number of
arguments passed into the function as well as <code class="docutils literal notranslate"><span class="pre">${ARGV0}</span></code> <code class="docutils literal notranslate"><span class="pre">${ARGV1}</span></code>
<code class="docutils literal notranslate"><span class="pre">${ARGV2}</span></code> …  which will have the actual values of the arguments
passed in.  This facilitates creating macros with optional arguments.
Additionally <code class="docutils literal notranslate"><span class="pre">${ARGV}</span></code> holds the list of all arguments given to the
macro and <code class="docutils literal notranslate"><span class="pre">${ARGN}</span></code> holds the list of arguments past the last expected
argument.</p>
<p>See the cmake_policy() command documentation for the behavior of
policies inside macros.</p>
<section id="macro-argument-caveats">
<h2>Macro Argument Caveats<a class="headerlink" href="#macro-argument-caveats" title="Ссылка на этот заголовок">¶</a></h2>
<p>Note that the parameters to a macro and values such as <code class="docutils literal notranslate"><span class="pre">ARGN</span></code> are
not variables in the usual CMake sense.  They are string
replacements much like the C preprocessor would do with a macro.
Therefore you will NOT be able to use commands like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">ARGV1</span><span class="p">)</span> <span class="c1"># ARGV1 is not a variable</span>
<span class="n">foreach</span><span class="p">(</span><span class="n">loop_var</span> <span class="n">IN</span> <span class="n">LISTS</span> <span class="n">ARGN</span><span class="p">)</span> <span class="c1"># ARGN is not a variable</span>
</pre></div>
</div>
<p>In the first case you can use <code class="docutils literal notranslate"><span class="pre">if(${ARGV1})</span></code>, in the second case, you can
use <code class="docutils literal notranslate"><span class="pre">foreach(loop_var</span> <span class="pre">${ARGN})</span></code> but this will skip empty arguments.
If you need to include them, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="n">list_var</span> <span class="s2">&quot;$</span><span class="si">{ARGN}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">foreach</span><span class="p">(</span><span class="n">loop_var</span> <span class="n">IN</span> <span class="n">LISTS</span> <span class="n">list_var</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that if you have a variable with the same name in the scope from
which the macro is called, using unreferenced names will use the
existing variable instead of the arguments. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">macro</span><span class="p">(</span><span class="n">_BAR</span><span class="p">)</span>
  <span class="n">foreach</span><span class="p">(</span><span class="n">arg</span> <span class="n">IN</span> <span class="n">LISTS</span> <span class="n">ARGN</span><span class="p">)</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
  <span class="n">endforeach</span><span class="p">()</span>
<span class="n">endmacro</span><span class="p">()</span>

<span class="n">function</span><span class="p">(</span><span class="n">_FOO</span><span class="p">)</span>
  <span class="n">_bar</span><span class="p">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">)</span>
<span class="n">endfunction</span><span class="p">()</span>

<span class="n">_foo</span><span class="p">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<p>Will loop over <code class="docutils literal notranslate"><span class="pre">a;b;c</span></code> and not over <code class="docutils literal notranslate"><span class="pre">x;y;z</span></code> as one might be expecting.
If you want true CMake variables and/or better CMake scope control you
should look at the function command.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Оглавление</a></h3>
    <ul>
<li><a class="reference internal" href="#">macro</a><ul>
<li><a class="reference internal" href="#macro-argument-caveats">Macro Argument Caveats</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Предыдущий раздел</h4>
    <p class="topless"><a href="load_command.html"
                          title="предыдущая глава">load_command</a></p>
  </div>
  <div>
    <h4>Следующий раздел</h4>
    <p class="topless"><a href="mark_as_advanced.html"
                          title="следующая глава">mark_as_advanced</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Эта страница</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/command/macro.rst.txt"
            rel="nofollow">Исходный текст</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Быстрый поиск</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Искать" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Алфавитный указатель"
             >указатель</a></li>
        <li class="right" >
          <a href="mark_as_advanced.html" title="mark_as_advanced"
             >вперёд</a> |</li>
        <li class="right" >
          <a href="load_command.html" title="load_command"
             >назад</a> |</li>
        <li>
          <img src="../_static/cmake-logo-16.png" alt=""
              style="vertical-align: middle; margin-top: -2px" />
        </li>
        <li>
          <a href="https://cmake.org/">CMake</a> &#187;
        </li>
        <li>
          <a href="../index.html">Documentation</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="../manual/cmake-commands.7.html" >cmake-commands(7)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">macro</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Авторские права 2000-2014 Kitware, Inc..
      Создано с использованием <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>